{"ast":null,"code":"import { csrfFetch } from './csrf';\nconst SET_REVIEW = 'review/setReview';\nconst CREATE_REVIEW = 'review/createReview';\nconst EDIT_REVIEW = 'review/editReview';\nconst DELETE_REVIEW = 'review/deleteReview';\n\nconst setReview = review => {\n  return {\n    type: SET_REVIEW,\n    payload: review\n  };\n};\n\nconst createReview = review => {\n  return {\n    type: CREATE_REVIEW,\n    payload: review\n  };\n};\n\nconst editReview = review => {\n  return {\n    type: EDIT_REVIEW,\n    payload: review\n  };\n};\n\nconst deleteReview = review => {\n  return {\n    type: DELETE_REVIEW,\n    payload: review\n  };\n};\n\nexport const getReviews = reviewId => async dispatch => {\n  const response = await fetch(`/api/review/${reviewId}`);\n  const reviews = await response.json();\n  dispatch(setReview(reviews));\n};\nexport const reviewCreate = payload => async dispatch => {\n  const response = await csrfFetch('/api/review/create', {\n    method: 'POST',\n    body: JSON.stringify(payload)\n  });\n\n  if (response.ok) {\n    const review = await response.json();\n    dispatch(createReview(review));\n    return review;\n  }\n};\nexport const reviewEdit = payload => async dispatch => {\n  const response = await csrfFetch(`/api/review/edit/${payload.reviewId}`, {\n    method: 'PUT',\n    body: JSON.stringify(payload)\n  });\n\n  if (response.ok) {\n    const review = await response.json();\n    dispatch(editReview(review));\n    return review;\n  }\n};\nexport const reviewDelete = payload => async dispatch => {\n  const response = await csrfFetch(`/api/review/delete/${payload.reviewId}`, {\n    method: 'DELETE',\n    body: JSON.stringify(payload)\n  });\n\n  if (response.ok) {\n    const review = await response.json();\n    dispatch(deleteReview(review));\n    return review;\n  }\n};\n\nconst reviewReducer = (state = [], action) => {\n  let newState;\n\n  switch (action.type) {\n    case SET_REVIEW:\n      newState = action.payload;\n      return newState;\n\n    case CREATE_REVIEW:\n      newState = action.payload;\n      return newState;\n\n    case EDIT_REVIEW:\n      newState = action.payload;\n      return newState;\n\n    case DELETE_REVIEW:\n      newState = action.payload;\n      return newState;\n\n    default:\n      return state;\n  }\n};\n\nexport default reviewReducer;","map":{"version":3,"sources":["/Users/jonathan/Documents/app_academy/module5/week15/day4/spade-magick-project/frontend/src/store/reviews.js"],"names":["csrfFetch","SET_REVIEW","CREATE_REVIEW","EDIT_REVIEW","DELETE_REVIEW","setReview","review","type","payload","createReview","editReview","deleteReview","getReviews","reviewId","dispatch","response","fetch","reviews","json","reviewCreate","method","body","JSON","stringify","ok","reviewEdit","reviewDelete","reviewReducer","state","action","newState"],"mappings":"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","sourcesContent":["import { csrfFetch } from './csrf';\n\nconst SET_REVIEW = 'review/setReview';\nconst CREATE_REVIEW = 'review/createReview';\nconst EDIT_REVIEW = 'review/editReview';\nconst DELETE_REVIEW = 'review/deleteReview';\n\nconst setReview = (review) => {\n\treturn {\n\t\ttype: SET_REVIEW,\n\t\tpayload: review,\n\t};\n};\n\nconst createReview = (review) => {\n\treturn {\n\t\ttype: CREATE_REVIEW,\n\t\tpayload: review,\n\t};\n};\n\nconst editReview = (review) => {\n\treturn {\n\t\ttype: EDIT_REVIEW,\n\t\tpayload: review,\n\t};\n};\n\nconst deleteReview = (review) => {\n\treturn {\n\t\ttype: DELETE_REVIEW,\n\t\tpayload: review,\n\t};\n};\n\nexport const getReviews = (reviewId) => async (dispatch) => {\n\tconst response = await fetch(`/api/review/${reviewId}`);\n\tconst reviews = await response.json();\n\tdispatch(setReview(reviews));\n};\n\nexport const reviewCreate = (payload) => async (dispatch) => {\n\tconst response = await csrfFetch('/api/review/create', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(payload),\n\t});\n\n\tif (response.ok) {\n\t\tconst review = await response.json();\n\t\tdispatch(createReview(review));\n\t\treturn review;\n\t}\n};\n\nexport const reviewEdit = (payload) => async (dispatch) => {\n\tconst response = await csrfFetch(`/api/review/edit/${payload.reviewId}`, {\n\t\tmethod: 'PUT',\n\t\tbody: JSON.stringify(payload),\n\t});\n\n\tif (response.ok) {\n\t\tconst review = await response.json();\n\t\tdispatch(editReview(review));\n\t\treturn review;\n\t}\n};\n\nexport const reviewDelete = (payload) => async (dispatch) => {\n\tconst response = await csrfFetch(`/api/review/delete/${payload.reviewId}`, {\n\t\tmethod: 'DELETE',\n\t\tbody: JSON.stringify(payload),\n\t});\n\n\tif (response.ok) {\n\t\tconst review = await response.json();\n\t\tdispatch(deleteReview(review));\n\t\treturn review;\n\t}\n};\n\nconst reviewReducer = (state = [], action) => {\n\tlet newState;\n\tswitch (action.type) {\n\t\tcase SET_REVIEW:\n\t\t\tnewState = action.payload;\n\t\t\treturn newState;\n\t\tcase CREATE_REVIEW:\n\t\t\tnewState = action.payload;\n\t\t\treturn newState;\n\t\tcase EDIT_REVIEW:\n\t\t\tnewState = action.payload;\n\t\t\treturn newState;\n\t\tcase DELETE_REVIEW:\n\t\t\tnewState = action.payload;\n\t\t\treturn newState;\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default reviewReducer;\n"]},"metadata":{},"sourceType":"module"}