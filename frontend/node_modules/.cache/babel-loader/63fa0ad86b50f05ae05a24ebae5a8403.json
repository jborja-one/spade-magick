{"ast":null,"code":"import { csrfFetch } from './csrf';\nconst SET_ILLUSION = 'illusion/setIllusion';\nconst CREATE_ILLUSION = 'illusion/createIllusion';\nconst EDIT_ILLUSION = 'illusion/editIllusion';\nconst DELETE_ILLUSION = 'illusion/deleteIllusion';\n\nconst setIllusion = illusion => {\n  return {\n    type: SET_ILLUSION,\n    payload: illusion\n  };\n};\n\nconst createIllusion = illusion => {\n  return {\n    type: CREATE_ILLUSION,\n    payload: illusion\n  };\n};\n\nconst editIllusion = illusion => {\n  return {\n    type: EDIT_ILLUSION,\n    payload: illusion\n  };\n};\n\nconst deleteIllusion = illusion => {\n  return {\n    type: DELETE_ILLUSION,\n    payload: illusion\n  };\n};\n\nexport const illusionCreate = payload => async dispatch => {\n  console.log(payload);\n  const response = await csrfFetch('/api/illusion/create', {\n    method: 'POST',\n    body: JSON.stringify(payload)\n  });\n\n  if (response.ok) {\n    const illusion = await response.json();\n    dispatch(createIllusion(illusion));\n    return illusion;\n  }\n};\nexport const illusionEdit = payload => async dispatch => {\n  const response = await fetch(`/api/illsuion/edit/${payload.id}`, {\n    method: 'PUT',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(payload)\n  });\n\n  if (response.ok) {\n    const illusion = await response.json();\n    dispatch(editIllusion(illusion));\n    return illusion;\n  }\n};\nexport const illusionDelete = payload => async dispatch => {\n  const response = await fetch(`/api/illsuion/delete/${payload.id}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(payload)\n  });\n\n  if (response.ok) {\n    const illusion = await response.json();\n    dispatch(deleteIllusion(illusion));\n    return illusion;\n  }\n};\nexport const getIllusion = illusionId => async dispatch => {\n  console.log(illusionId, 'illsuionId in thunk');\n  const response = await fetch(`/api/illusion/${illusionId}`);\n  const illusion = await response.json();\n  dispatch(setIllusion(illusion));\n};\n\nconst illusionReducer = (state = [], action) => {\n  let newState;\n\n  switch (action.type) {\n    case SET_ILLUSION:\n      newState = action.payload;\n      return newState;\n\n    case CREATE_ILLUSION:\n      newState = action.payload;\n      return newState;\n\n    case EDIT_ILLUSION:\n      newState = action.payload;\n      return newState;\n\n    case DELETE_ILLUSION:\n      newState = action.payload;\n      return newState;\n\n    default:\n      return state;\n  }\n};\n\nexport default illusionReducer;","map":{"version":3,"sources":["/Users/jonathan/Documents/app_academy/module5/week15/day4/spade-magick-project/express-react-app/frontend/src/store/illusion.js"],"names":["csrfFetch","SET_ILLUSION","CREATE_ILLUSION","EDIT_ILLUSION","DELETE_ILLUSION","setIllusion","illusion","type","payload","createIllusion","editIllusion","deleteIllusion","illusionCreate","dispatch","console","log","response","method","body","JSON","stringify","ok","json","illusionEdit","fetch","id","headers","illusionDelete","getIllusion","illusionId","illusionReducer","state","action","newState"],"mappings":"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","sourcesContent":["import { csrfFetch } from './csrf';\n\nconst SET_ILLUSION = 'illusion/setIllusion';\nconst CREATE_ILLUSION = 'illusion/createIllusion';\nconst EDIT_ILLUSION = 'illusion/editIllusion';\nconst DELETE_ILLUSION = 'illusion/deleteIllusion';\n\nconst setIllusion = (illusion) => {\n\treturn {\n\t\ttype: SET_ILLUSION,\n\t\tpayload: illusion,\n\t};\n};\n\nconst createIllusion = (illusion) => {\n\treturn {\n\t\ttype: CREATE_ILLUSION,\n\t\tpayload: illusion,\n\t};\n};\n\nconst editIllusion = (illusion) => {\n\treturn {\n\t\ttype: EDIT_ILLUSION,\n\t\tpayload: illusion,\n\t};\n};\n\nconst deleteIllusion = (illusion) => {\n\treturn {\n\t\ttype: DELETE_ILLUSION,\n\t\tpayload: illusion,\n\t};\n};\n\nexport const illusionCreate = (payload) => async (dispatch) => {\n\tconsole.log(payload);\n\tconst response = await csrfFetch('/api/illusion/create', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(payload),\n\t});\n\n\tif (response.ok) {\n\t\tconst illusion = await response.json();\n\t\tdispatch(createIllusion(illusion));\n\t\treturn illusion;\n\t}\n};\n\nexport const illusionEdit = (payload) => async (dispatch) => {\n\tconst response = await fetch(`/api/illsuion/edit/${payload.id}`, {\n\t\tmethod: 'PUT',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(payload),\n\t});\n\n\tif (response.ok) {\n\t\tconst illusion = await response.json();\n\t\tdispatch(editIllusion(illusion));\n\t\treturn illusion;\n\t}\n};\n\nexport const illusionDelete = (payload) => async (dispatch) => {\n\tconst response = await fetch(`/api/illsuion/delete/${payload.id}`, {\n\t\tmethod: 'DELETE',\n\t\theaders: { 'Content-Type': 'application/json' },\n\t\tbody: JSON.stringify(payload),\n\t});\n\n\tif (response.ok) {\n\t\tconst illusion = await response.json();\n\t\tdispatch(deleteIllusion(illusion));\n\t\treturn illusion;\n\t}\n};\n\nexport const getIllusion = (illusionId) => async (dispatch) => {\n\tconsole.log(illusionId, 'illsuionId in thunk');\n\tconst response = await fetch(`/api/illusion/${illusionId}`);\n\tconst illusion = await response.json();\n\tdispatch(setIllusion(illusion));\n};\n\nconst illusionReducer = (state = [], action) => {\n\tlet newState;\n\tswitch (action.type) {\n\t\tcase SET_ILLUSION:\n\t\t\tnewState = action.payload;\n\t\t\treturn newState;\n\t\tcase CREATE_ILLUSION:\n\t\t\tnewState = action.payload;\n\t\t\treturn newState;\n\t\tcase EDIT_ILLUSION:\n\t\t\tnewState = action.payload;\n\t\t\treturn newState;\n\t\tcase DELETE_ILLUSION:\n\t\t\tnewState = action.payload;\n\t\t\treturn newState;\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default illusionReducer;\n"]},"metadata":{},"sourceType":"module"}